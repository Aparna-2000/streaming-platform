{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nlet isRefreshing = false;\nlet failedQueue = [];\nconst processQueue = (error = null, token = null) => {\n  failedQueue.forEach(prom => {\n    if (error) {\n      prom.reject(error);\n    } else {\n      prom.resolve(token);\n    }\n  });\n  failedQueue = [];\n};\napi.interceptors.request.use(config => {\n  var _document$querySelect;\n  const token = localStorage.getItem('accessToken');\n  const csrfToken = (_document$querySelect = document.querySelector('meta[name=\"csrf-token\"]')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.getAttribute('content');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  if (csrfToken) {\n    config.headers['X-CSRF-Token'] = csrfToken;\n  }\n  return config;\n});\n\n// Move authService definition before interceptors that use it\nconst authService = {\n  async login(credentials) {\n    try {\n      var _response$data$data;\n      console.log('üîë Attempting login with credentials:', credentials);\n\n      // Log the full request details\n      console.log('üì§ Request details:', {\n        url: `${api.defaults.baseURL}/auth/login`,\n        method: 'POST',\n        data: credentials,\n        headers: {\n          'Content-Type': 'application/json',\n          ...api.defaults.headers.common\n        }\n      });\n      const response = await api.post('/auth/login', credentials);\n      console.log('‚úÖ Login response:', {\n        status: response.status,\n        statusText: response.statusText,\n        headers: response.headers,\n        data: response.data\n      });\n      if (response.data.success && (_response$data$data = response.data.data) !== null && _response$data$data !== void 0 && _response$data$data.accessToken) {\n        console.log('üîê Login successful, storing access token');\n        localStorage.setItem('accessToken', response.data.data.accessToken);\n\n        // Make sure user data is properly set in the response\n        if (!response.data.data.user) {\n          console.warn('‚ö†Ô∏è Login successful but no user data in response');\n          response.data.data = {\n            ...response.data.data,\n            user: {\n              id: 0,\n              username: credentials.username,\n              email: `${credentials.username}@example.com`\n            }\n          };\n        }\n      } else {\n        console.warn('‚ùå Login response indicates failure:', response.data);\n      }\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Login error:', error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || 'Login failed. Please check your network connection and try again.';\n      return {\n        success: false,\n        message: errorMessage\n      };\n    }\n  },\n  async logout() {\n    try {\n      const response = await api.post('/auth/logout');\n      localStorage.removeItem('accessToken');\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      return {\n        success: false,\n        message: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Logout failed'\n      };\n    }\n  },\n  async refreshToken() {\n    try {\n      var _response$data$data2;\n      const response = await api.post('/auth/refresh-token');\n      if (response.data.success && (_response$data$data2 = response.data.data) !== null && _response$data$data2 !== void 0 && _response$data$data2.accessToken) {\n        localStorage.setItem('accessToken', response.data.data.accessToken);\n      }\n      return response.data;\n    } catch (error) {\n      localStorage.removeItem('accessToken');\n      throw error;\n    }\n  }\n};\napi.interceptors.response.use(response => response, async error => {\n  var _error$response3, _error$response4, _error$response5, _error$config, _error$response6;\n  const originalRequest = error.config;\n  console.error('üî¥ API Error:', {\n    url: originalRequest.url,\n    method: originalRequest.method,\n    status: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status,\n    statusText: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.statusText,\n    responseData: (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data,\n    headers: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.headers\n  });\n\n  // If error is not from a request or we've already retried, reject\n  if (!originalRequest || originalRequest._retry) {\n    return Promise.reject(error);\n  }\n\n  // Handle 401 Unauthorized\n  if (((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status) === 401) {\n    var _originalRequest$url, _originalRequest$url2;\n    // If this is a login request, just reject with the original error\n    if ((_originalRequest$url = originalRequest.url) !== null && _originalRequest$url !== void 0 && _originalRequest$url.includes('/auth/login')) {\n      console.log('üîê Login failed with 401 - Invalid credentials');\n      return Promise.reject(error);\n    }\n\n    // If this is a refresh token request, clear tokens and redirect to login\n    if ((_originalRequest$url2 = originalRequest.url) !== null && _originalRequest$url2 !== void 0 && _originalRequest$url2.includes('/auth/refresh-token')) {\n      console.log('üîÑ Refresh token failed - redirecting to login');\n      localStorage.removeItem('accessToken');\n      window.location.href = '/login';\n      return Promise.reject(new Error('Session expired. Please log in again.'));\n    }\n\n    // For other 401 errors, try to refresh the token\n    console.log('üîÑ Attempting to refresh token...');\n    originalRequest._retry = true;\n    try {\n      var _refreshResponse$data;\n      const refreshResponse = await authService.refreshToken();\n      if (refreshResponse.success && (_refreshResponse$data = refreshResponse.data) !== null && _refreshResponse$data !== void 0 && _refreshResponse$data.accessToken) {\n        console.log('‚úÖ Token refreshed successfully');\n        const token = refreshResponse.data.accessToken;\n\n        // Update the original request with new token\n        if (originalRequest.headers) {\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n        }\n\n        // Retry the original request\n        return api(originalRequest);\n      } else {\n        // If refresh fails, redirect to login\n        localStorage.removeItem('accessToken');\n        if (!window.location.pathname.includes('/login')) {\n          window.location.href = '/login';\n        }\n        return Promise.reject(new Error('Session expired. Please log in again.'));\n      }\n    } catch (refreshError) {\n      // Clear any stored tokens and redirect to login\n      localStorage.removeItem('accessToken');\n      if (!isLoginPage) {\n        window.location.href = '/login';\n      }\n      processQueue(refreshError, '');\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  }\n\n  // For other errors, just reject\n  return Promise.reject(error);\n});\n\n// Export the authService that was defined earlier\nexport { authService };\nexport const weatherService = {\n  async getWeatherData(city = 'London') {\n    try {\n      const response = await api.get(`/weather?city=${encodeURIComponent(city)}`);\n      return response.data;\n    } catch (error) {\n      var _error$response7, _error$response7$data;\n      return {\n        success: false,\n        message: ((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.message) || 'Failed to fetch weather data'\n      };\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","withCredentials","headers","isRefreshing","failedQueue","processQueue","error","token","forEach","prom","reject","resolve","interceptors","request","use","config","_document$querySelect","localStorage","getItem","csrfToken","document","querySelector","getAttribute","Authorization","authService","login","credentials","_response$data$data","console","log","url","defaults","method","data","common","response","post","status","statusText","success","accessToken","setItem","user","warn","id","username","email","_error$response","_error$response$data","errorMessage","message","logout","removeItem","_error$response2","_error$response2$data","refreshToken","_response$data$data2","_error$response3","_error$response4","_error$response5","_error$config","_error$response6","originalRequest","responseData","_retry","Promise","_originalRequest$url","_originalRequest$url2","includes","window","location","href","Error","_refreshResponse$data","refreshResponse","pathname","refreshError","isLoginPage","weatherService","getWeatherData","city","get","encodeURIComponent","_error$response7","_error$response7$data"],"sources":["/Users/aparnar/CascadeProjects/streaming-platform/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosError, AxiosRequestConfig } from 'axios';\nimport { User, LoginFormData, WeatherData, ApiResponse } from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nlet isRefreshing = false;\nlet failedQueue: Array<{ resolve: (token: string) => void; reject: (error: any) => void }> = [];\n\nconst processQueue = (error: any = null, token: string | null = null) => {\n  failedQueue.forEach(prom => {\n    if (error) {\n      prom.reject(error);\n    } else {\n      prom.resolve(token!);\n    }\n  });\n  failedQueue = [];\n};\n\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('accessToken');\n  const csrfToken = document.querySelector('meta[name=\"csrf-token\"]')?.getAttribute('content');\n  \n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  \n  if (csrfToken) {\n    config.headers['X-CSRF-Token'] = csrfToken;\n  }\n  \n  return config;\n});\n\n// Move authService definition before interceptors that use it\nconst authService = {\n  async login(credentials: LoginFormData): Promise<ApiResponse<User>> {\n    try {\n      console.log('üîë Attempting login with credentials:', credentials);\n      \n      // Log the full request details\n      console.log('üì§ Request details:', {\n        url: `${api.defaults.baseURL}/auth/login`,\n        method: 'POST',\n        data: credentials,\n        headers: {\n          'Content-Type': 'application/json',\n          ...(api.defaults.headers.common as any)\n        }\n      });\n      \n      const response = await api.post('/auth/login', credentials);\n      \n      console.log('‚úÖ Login response:', {\n        status: response.status,\n        statusText: response.statusText,\n        headers: response.headers,\n        data: response.data\n      });\n      \n      if (response.data.success && response.data.data?.accessToken) {\n        console.log('üîê Login successful, storing access token');\n        localStorage.setItem('accessToken', response.data.data.accessToken);\n        \n        // Make sure user data is properly set in the response\n        if (!response.data.data.user) {\n          console.warn('‚ö†Ô∏è Login successful but no user data in response');\n          response.data.data = { \n            ...response.data.data, \n            user: { \n              id: 0, \n              username: credentials.username, \n              email: `${credentials.username}@example.com` \n            } \n          };\n        }\n      } else {\n        console.warn('‚ùå Login response indicates failure:', response.data);\n      }\n      \n      return response.data;\n    } catch (error: any) {\n      console.error('Login error:', error);\n      const errorMessage = error.response?.data?.message || \n                         error.message || \n                         'Login failed. Please check your network connection and try again.';\n      return {\n        success: false,\n        message: errorMessage,\n      };\n    }\n  },\n\n  async logout(): Promise<ApiResponse<null>> {\n    try {\n      const response = await api.post('/auth/logout');\n      localStorage.removeItem('accessToken');\n      return response.data;\n    } catch (error: any) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Logout failed',\n      };\n    }\n  },\n\n  async refreshToken(): Promise<ApiResponse<{ accessToken: string }>> {\n    try {\n      const response = await api.post('/auth/refresh-token');\n      if (response.data.success && response.data.data?.accessToken) {\n        localStorage.setItem('accessToken', response.data.data.accessToken);\n      }\n      return response.data;\n    } catch (error: any) {\n      localStorage.removeItem('accessToken');\n      throw error;\n    }\n  },\n};\n\napi.interceptors.response.use(\n  (response) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as AxiosRequestConfig & { _retry?: boolean };\n    \n    console.error('üî¥ API Error:', {\n      url: originalRequest.url,\n      method: originalRequest.method,\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      responseData: error.response?.data,\n      headers: error.config?.headers\n    });\n    \n    // If error is not from a request or we've already retried, reject\n    if (!originalRequest || originalRequest._retry) {\n      return Promise.reject(error);\n    }\n    \n    // Handle 401 Unauthorized\n    if (error.response?.status === 401) {\n      // If this is a login request, just reject with the original error\n      if (originalRequest.url?.includes('/auth/login')) {\n        console.log('üîê Login failed with 401 - Invalid credentials');\n        return Promise.reject(error);\n      }\n      \n      // If this is a refresh token request, clear tokens and redirect to login\n      if (originalRequest.url?.includes('/auth/refresh-token')) {\n        console.log('üîÑ Refresh token failed - redirecting to login');\n        localStorage.removeItem('accessToken');\n        window.location.href = '/login';\n        return Promise.reject(new Error('Session expired. Please log in again.'));\n      }\n      \n      // For other 401 errors, try to refresh the token\n      console.log('üîÑ Attempting to refresh token...');\n      originalRequest._retry = true;\n      \n      try {\n        const refreshResponse = await authService.refreshToken();\n        \n        if (refreshResponse.success && refreshResponse.data?.accessToken) {\n          console.log('‚úÖ Token refreshed successfully');\n          const token = refreshResponse.data.accessToken;\n          \n          // Update the original request with new token\n          if (originalRequest.headers) {\n            originalRequest.headers.Authorization = `Bearer ${token}`;\n          }\n          \n          // Retry the original request\n          return api(originalRequest);\n        } else {\n          // If refresh fails, redirect to login\n          localStorage.removeItem('accessToken');\n          if (!window.location.pathname.includes('/login')) {\n            window.location.href = '/login';\n          }\n          return Promise.reject(new Error('Session expired. Please log in again.'));\n        }\n      } catch (refreshError) {\n        // Clear any stored tokens and redirect to login\n        localStorage.removeItem('accessToken');\n        if (!isLoginPage) {\n          window.location.href = '/login';\n        }\n        processQueue(refreshError, '');\n        return Promise.reject(refreshError);\n      } finally {\n        isRefreshing = false;\n      }\n    }\n\n    // For other errors, just reject\n    return Promise.reject(error);\n  }\n);\n\n// Export the authService that was defined earlier\nexport { authService };\n\nexport const weatherService = {\n  async getWeatherData(city: string = 'London'): Promise<ApiResponse<WeatherData>> {\n    try {\n      const response = await api.get(`/weather?city=${encodeURIComponent(city)}`);\n      return response.data;\n    } catch (error: any) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to fetch weather data',\n      };\n    }\n  },\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}